"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Utilities=function(){function t(){classCallCheck(this,t)}return createClass(t,null,[{key:"getDOMElement",value:function(t){var e=null;return"string"==typeof t&&t.indexOf("#")!==-1&&0===t.indexOf("#")?e=document.getElementById(t.slice(1)):"object"===(void 0===t?"undefined":_typeof(t))&&void 0!==t.nodeType&&void 0===t.length&&(e=t),e}},{key:"createDOMElement",value:function(t,e,n,i){var o=document.createElement(t);return o.classList.add(e),n&&n.appendChild(o),i&&i(o),o}},{key:"getDocScrolltop",value:function(){return document.documentElement.scrollTop||document.body.scrollTop}},{key:"limitTheNumber",value:function(t,e,n){return t>e?t<n?t:n:e}}]),t}(),ContentMeter=function(){function t(e,n){classCallCheck(this,t),this.barSelector=e,this.contentSelector=n,this.init()}return createClass(t,[{key:"updateClasses",value:function(){Utilities.getDocScrolltop()>this.content.height+this.content.offset||Utilities.getDocScrolltop()+this.content.visibleHeight<this.content.offset?this.barContainer.classList.add("js-invisible"):this.barContainer.classList.remove("js-invisible")}},{key:"getBarWidth",value:function(){var t=0;return this.content||this.readContentDimensions(),t=((this.content.selfScrolled?this.contentContainer.scrollTop:Utilities.getDocScrolltop())+this.content.barBasicVal)/this.content.height*100,Utilities.limitTheNumber(t,0,100)}},{key:"setBarWidth",value:function(){this.bar.style.width=this.getBarWidth()+"%"}},{key:"setCounterValue",value:function(){this.counter.textContent=Math.ceil(this.getBarWidth())}},{key:"readContentDimensions",value:function(){this.content=this.content||{},this.content.selfScrolled=this.contentContainer.scrollHeight>this.contentContainer.clientHeight,this.content.height=this.contentContainer.scrollHeight,this.content.visibleHeight=Math.min(window.innerHeight,this.contentContainer.clientHeight),this.content.offset=this.content.selfScrolled?0:this.contentContainer.offsetTop,this.content.barBasicVal=this.content.offset*-1+this.content.visibleHeight,console.log(this.content)}},{key:"bindUIEvents",value:function(){var t=this;(this.content.selfScrolled?this.contentContainer:window).addEventListener("scroll",function(){t.setBarWidth(),t.setCounterValue()}),window.addEventListener("scroll",function(){return t.updateClasses()}),window.addEventListener("resize",function(){t.readContentDimensions(),t.setBarWidth(),t.setCounterValue(),t.updateClasses()})}},{key:"createMeter",value:function(){var t=this;Utilities.createDOMElement("div","baza-contentmeter__bar",this.barContainer,function(e){t.bar=e,t.setBarWidth()}),Utilities.createDOMElement("div","baza-contentmeter__counter",this.barContainer,function(e){t.counter=e,t.setCounterValue()}),this.updateClasses(),this.bindUIEvents()}},{key:"init",value:function(){if(this.barContainer=Utilities.getDOMElement(this.barSelector),this.contentContainer=Utilities.getDOMElement(this.contentSelector),null===this.barContainer||null===this.contentContainer)throw new Error("Wrong selectors or given selectors match no elements.");this.readContentDimensions(),this.createMeter()}}]),t}();
//# sourceMappingURL=baza-contentmeter.js.map
