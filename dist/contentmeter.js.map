{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap bd0f3f504501bf651f9d","webpack:///./src/contentmeter.js","webpack:///./src/utilities.js"],"names":["root","factory","exports","module","define","amd","self","this","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_utilities","Contentmeter","barSelector","contentSelector","_classCallCheck","init","_utilities2","default","getDocScrolltop","content","height","offset","visibleHeight","barContainer","classList","add","remove","barW","readContentDimensions","selfScrolled","contentContainer","scrollTop","barBasicVal","limitTheNumber","bar","style","width","getBarWidth","counter","textContent","Math","ceil","scrollHeight","clientHeight","min","window","innerHeight","offsetTop","console","log","_this","addEventListener","setBarWidth","setCounterValue","updateClasses","_this2","createDOMElement","element","bindUIEvents","getDOMElement","Error","createMeter","Utilities","selector","indexOf","document","getElementById","slice","_typeof","undefined","nodeType","length","className","parent","callback","DOMElement","createElement","appendChild","documentElement","body","theNumber","max"],"mappings":"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","file":"contentmeter.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Contentmeter\"] = factory();\n\telse\n\t\troot[\"Contentmeter\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bd0f3f504501bf651f9d","import Utilities from './utilities.js';\n\nclass Contentmeter {\n  constructor( barSelector, contentSelector ) {\n    this.barSelector = barSelector;\n    this.contentSelector = contentSelector;\n\n    this.init();\n  }\n\n  updateClasses() {\n    if ( Utilities.getDocScrolltop() > ( this.content.height + this.content.offset )\n    || ( Utilities.getDocScrolltop() + this.content.visibleHeight ) < this.content.offset ) {\n\n      this.barContainer.classList.add( 'js-invisible' );\n    } else {\n      this.barContainer.classList.remove( 'js-invisible' );\n    }\n  }\n\n  getBarWidth() {\n    let barW = 0;\n    if ( !this.content ) {\n      this.readContentDimensions();\n    }\n\n    barW = (\n      ( this.content.selfScrolled ? this.contentContainer.scrollTop : Utilities.getDocScrolltop() )\n      + this.content.barBasicVal\n    ) / this.content.height * 100;\n\n    return Utilities.limitTheNumber( barW, 0, 100 );\n  }\n\n  setBarWidth() {\n    this.bar.style.width = `${this.getBarWidth()}%`;\n  }\n\n  setCounterValue() {\n    this.counter.textContent = Math.ceil( this.getBarWidth() );\n  }\n\n  readContentDimensions() {\n    this.content = this.content || {};\n\n    this.content.selfScrolled  = ( this.contentContainer.scrollHeight > this.contentContainer.clientHeight );\n\n    this.content.height        = this.contentContainer.scrollHeight;\n    this.content.visibleHeight = Math.min( window.innerHeight, this.contentContainer.clientHeight );\n    this.content.offset        = this.content.selfScrolled ? 0 : this.contentContainer.offsetTop;\n    this.content.barBasicVal   = this.content.offset * ( -1 ) + this.content.visibleHeight;\n\n    console.log( this.content );\n  }\n\n  bindUIEvents() {\n    const scrollTarget = this.content.selfScrolled ? this.contentContainer : window;\n    scrollTarget.addEventListener( 'scroll', () => {\n      this.setBarWidth();\n      this.setCounterValue();\n    } );\n\n    window.addEventListener( 'scroll', () => {\n      return this.updateClasses();\n    } );\n    window.addEventListener( 'resize', () => {\n      this.readContentDimensions();\n      this.setBarWidth();\n      this.setCounterValue();\n      this.updateClasses();\n    } );\n  }\n\n  createMeter() {\n    Utilities.createDOMElement(\n      'div', 'contentmeter__bar', this.barContainer, ( element ) => {\n        this.bar = element;\n        this.setBarWidth();\n      }\n    );\n\n    Utilities.createDOMElement(\n      'div', 'contentmeter__counter', this.barContainer, ( element ) => {\n        this.counter = element;\n        this.setCounterValue();\n      }\n    );\n\n    this.updateClasses();\n    this.bindUIEvents();\n  }\n\n  init() {\n    this.barContainer = Utilities.getDOMElement( this.barSelector );\n    this.contentContainer = Utilities.getDOMElement( this.contentSelector );\n\n    if ( this.barContainer !== null && this.contentContainer !== null ) {\n      this.readContentDimensions();\n      this.createMeter();\n    } else {\n      throw new Error( 'Wrong selectors or given selectors match no elements.' );\n    }\n  }\n}\n\nexport default Contentmeter;\n\n\n\n// WEBPACK FOOTER //\n// ./src/contentmeter.js","class Utilities {\n  static getDOMElement( selector ) {\n    let element = null;\n\n    if ( typeof selector === 'string'\n      && selector.indexOf( '#' ) !== -1\n      && selector.indexOf( '#' ) === 0\n    ) {\n      element = document.getElementById( selector.slice( 1 ) );\n\n    } else if ( typeof selector === 'object'\n      && selector.nodeType !== undefined\n      && selector.length === undefined\n    ) {\n      element = selector;\n    }\n\n    return element;\n  }\n\n  static createDOMElement( element, className, parent, callback ) {\n    const DOMElement = document.createElement( element );\n    DOMElement.classList.add( className );\n\n    if ( parent ) {\n      parent.appendChild( DOMElement );\n    }\n\n    if ( callback ) {\n      callback( DOMElement );\n    }\n\n    return DOMElement;\n  }\n\n  static getDocScrolltop() {\n    return document.documentElement.scrollTop || document.body.scrollTop;\n  }\n\n  static limitTheNumber( theNumber, min, max ) {\n    return ( theNumber > min ) ? ( ( theNumber < max ) ? theNumber : max ) : min;\n  }\n}\n\nexport default Utilities;\n\n\n\n// WEBPACK FOOTER //\n// ./src/utilities.js"],"sourceRoot":""}